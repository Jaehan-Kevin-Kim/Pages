{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{RNiq:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return b}));var c=n(\"q1tI\"),a=n(\"/MKj\"),o=n(\"1zst\"),i=n(\"kduo\"),r=n(\"ODXe\"),l=n(\"Vl3Y\"),s=n(\"5rEg\"),u=n(\"2/Rp\"),d=n(\"p+NB\"),f=n(\"HlrF\"),j=n(\"nKUr\"),p=function(){var e=Object(a.c)((function(e){return e.post})),t=e.imagePaths,n=e.addPostDone;console.log(\"imagePaths\",t);var o=Object(a.b)(),i=Object(f.a)(\"\"),p=Object(r.a)(i,3),b=p[0],h=p[1],m=p[2];Object(c.useEffect)((function(){n&&m(\"\")}),[n]);var O=Object(c.useCallback)((function(){if(!b||!b.trim())return alert(\"Please fill the post.\");var e=new FormData;return console.log(\"formData when initiated\",e),t.forEach((function(t){e.append(\"image\",t)})),console.log(\"formData when only add image:p\",e),e.append(\"content\",b),console.log(\"formData after done append\",e),o({type:d.e,data:e})}),[b,t]),g=Object(c.useRef)(),v=Object(c.useCallback)((function(){g.current.click()}),[g.current]),w=Object(c.useCallback)((function(e){console.log(\"images\",e.target.files);var t=new FormData;[].forEach.call(e.target.files,(function(e){t.append(\"image\",e)})),o({type:d.G,data:t})}),[]),x=Object(c.useCallback)((function(e){return function(){o({type:d.v,data:e})}}),[]);return Object(j.jsxs)(l.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:O,children:[Object(j.jsx)(s.a.TextArea,{value:b,onChange:h,maxLength:140,placeholder:\"Do you have anything to share?\"}),Object(j.jsxs)(\"div\",{children:[Object(j.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:g,onChange:w}),Object(j.jsx)(u.a,{onClick:v,children:\"Image Upload\"}),Object(j.jsx)(u.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",children:\"Tweet!\"})]}),Object(j.jsx)(\"div\",{children:t.map((function(e,t){return Object(j.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(j.jsx)(\"img\",{src:\"http://localhost:3065/\".concat(e),style:{width:\"200px\"},alt:e}),Object(j.jsx)(\"div\",{children:Object(j.jsx)(u.a,{onClick:x(t),children:\"Remove\"})})]},e)}))})]})},b=!0;t.default=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.user})).me,n=Object(a.c)((function(e){return e.post})),r=n.mainPosts,l=n.hasMorePosts,s=n.loadPostsLoading,u=n.retweetError;return Object(c.useEffect)((function(){u&&alert(u)}),[u]),Object(c.useEffect)((function(){function t(){if(window.pageYOffset+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&l&&!s){var t,n=null===(t=r[r.length-1])||void 0===t?void 0:t.id;console.log(\"lastId\",n),e({type:d.n,lastId:n})}}return window.addEventListener(\"scroll\",t),function(){window.removeEventListener(\"scroll\",t)}}),[l,s,r]),Object(j.jsxs)(o.a,{children:[t&&Object(j.jsx)(p,{}),r.map((function(e){return Object(j.jsx)(i.a,{post:e},e.id)}))]})}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",0,2,3,7,1,4,5,6,8]]]);","extractedComments":[]}