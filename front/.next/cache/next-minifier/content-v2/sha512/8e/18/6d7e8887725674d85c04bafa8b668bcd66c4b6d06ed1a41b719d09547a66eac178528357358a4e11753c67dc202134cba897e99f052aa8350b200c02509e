{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{RNiq:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return b}));var c=n(\"q1tI\"),a=n(\"/MKj\"),o=n(\"1zst\"),i=n(\"kduo\"),r=n(\"ODXe\"),l=n(\"Vl3Y\"),s=n(\"5rEg\"),u=n(\"2/Rp\"),d=n(\"p+NB\"),f=n(\"HlrF\"),j=n(\"nKUr\"),p=function(){var e=Object(a.c)((function(e){return e.post})),t=e.imagePaths,n=e.addPostDone;console.log(\"imagePaths\",t);var o=Object(a.b)(),i=Object(f.a)(\"\"),p=Object(r.a)(i,3),b=p[0],h=p[1],m=p[2];Object(c.useEffect)((function(){n&&m(\"\")}),[n]);var O=Object(c.useCallback)((function(){if(!b||!b.trim())return alert(\"Please fill the post.\");var e=new FormData;return console.log(\"formData when initiated\",e),t.forEach((function(t){e.append(\"image\",t)})),console.log(\"formData when only add image:p\",e),e.append(\"content\",b),console.log(\"formData after done append\",e),o({type:d.e,data:e})}),[b,t]),g=Object(c.useRef)(),v=Object(c.useCallback)((function(){g.current.click()}),[g.current]),w=Object(c.useCallback)((function(e){console.log(\"images\",e.target.files);var t=new FormData;[].forEach.call(e.target.files,(function(e){t.append(\"image\",e)})),o({type:d.G,data:t})}),[]),x=Object(c.useCallback)((function(e){return function(){o({type:d.v,data:e})}}),[]);return Object(j.jsxs)(l.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:O,children:[Object(j.jsx)(s.a.TextArea,{value:b,onChange:h,maxLength:140,placeholder:\"Do you have anything to share?\"}),Object(j.jsxs)(\"div\",{children:[Object(j.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:g,onChange:w}),Object(j.jsx)(u.a,{onClick:v,children:\"Image Upload\"}),Object(j.jsx)(u.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",children:\"Tweet!\"})]}),Object(j.jsx)(\"div\",{children:t.map((function(e,t){return Object(j.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(j.jsx)(\"img\",{src:\"http://localhost:3065/\".concat(e),style:{width:\"200px\"},alt:e}),Object(j.jsx)(\"div\",{children:Object(j.jsx)(u.a,{onClick:x(t),children:\"Remove\"})})]},e)}))})]})},b=!0;t.default=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.user})).me,n=Object(a.c)((function(e){return e.post})),r=n.mainPosts,l=n.hasMorePosts,s=n.loadPostsLoading,u=n.retweetError;return Object(c.useEffect)((function(){u&&alert(u)}),[u]),Object(c.useEffect)((function(){function t(){if(window.pageYOffset+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&l&&!s){var t,n=null===(t=r[r.length-1])||void 0===t?void 0:t.id;console.log(\"lastId\",n),e({type:d.n,lastId:n})}}return window.addEventListener(\"scroll\",t),function(){window.removeEventListener(\"scroll\",t)}}),[l,s,r]),Object(j.jsxs)(o.a,{children:[t&&Object(j.jsx)(p,{}),r.map((function(e){return Object(j.jsx)(i.a,{post:e},e.id)}))]})}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",0,2,3,7,1,4,5,6,8]]]);","map":{"version":3,"sources":["static/chunks/pages/index-51c6e2a93489fe1f06dd.js"],"names":["_N_E","window","push","RNiq","module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","react","es","AppLayout","PostCard","slicedToArray","es_form","input","es_button","reducers_post","useinput","jsx_runtime","components_PostForm","_useSelector","Object","state","post","imagePaths","addPostDone","console","log","dispatch","_useInput","_useInput2","text","onChangeText","setText","onSubmit","trim","alert","formData","FormData","forEach","p","append","type","data","imageInput","onClickImageUpload","current","click","onChangeImages","e","target","files","imageFormData","call","f","onRemoveImage","index","style","margin","encType","onFinish","children","TextArea","value","onChange","maxLength","placeholder","name","multiple","hidden","ref","onClick","float","htmlType","map","v","i","display","src","concat","width","alt","me","user","_useSelector2","mainPosts","hasMorePosts","loadPostsLoading","retweetError","onScroll","pageYOffset","document","documentElement","clientHeight","scrollHeight","_mainPosts","lastId","length","id","addEventListener","removeEventListener","vlRD","exports","__NEXT_P"],"mappings":"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"},"extractedComments":[]}